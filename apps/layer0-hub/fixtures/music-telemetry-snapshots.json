[
  {
    "name": "default_stub_telemetry",
    "snapshot": {
      "session": null,
      "entitlements": [],
      "offlineCache": {
        "lastValidatedAt": "2026-02-13T00:00:00.000Z",
        "maxOfflineDays": 21,
        "offlineDaysRemaining": 21,
        "cacheState": "valid"
      },
      "transactions": []
    },
    "requestedEngineId": null,
    "expected": {
      "schemaVersion": "1.0.0",
      "engine": {
        "id": "stub-music-intelligence-v1",
        "name": "Stub Music Intelligence",
        "version": "1.0.0",
        "source": "default",
        "reason": "No session: use stub engine."
      },
      "decision": {
        "status": "ready",
        "lane": "authenticate",
        "confidencePct": 92
      },
      "context": {
        "hasSession": false,
        "ownedCount": 0,
        "installedCount": 0,
        "offlineDaysRemaining": 21
      }
    }
  },
  {
    "name": "explicit_real_telemetry",
    "snapshot": {
      "session": {
        "userId": "usr_1",
        "email": "producer@antiphon.audio",
        "displayName": "Producer",
        "signedInAt": "2026-02-13T00:00:00.000Z"
      },
      "entitlements": [
        {
          "id": "app.1",
          "name": "App One",
          "version": "1.0.0",
          "installedVersion": null,
          "owned": true,
          "installState": "not-installed",
          "updateAvailable": false
        }
      ],
      "offlineCache": {
        "lastValidatedAt": "2026-02-13T00:00:00.000Z",
        "maxOfflineDays": 21,
        "offlineDaysRemaining": 21,
        "cacheState": "valid"
      },
      "transactions": []
    },
    "requestedEngineId": "minimal-real-music-intelligence-v1",
    "expected": {
      "schemaVersion": "1.0.0",
      "engine": {
        "id": "minimal-real-music-intelligence-v1",
        "name": "Minimal Real Music Intelligence",
        "version": "1.0.0",
        "source": "requested",
        "reason": "Requested engine id 'minimal-real-music-intelligence-v1' was found."
      },
      "decision": {
        "status": "ready",
        "lane": "install",
        "confidencePct": 82
      },
      "context": {
        "hasSession": true,
        "ownedCount": 1,
        "installedCount": 0,
        "offlineDaysRemaining": 21
      }
    }
  },
  {
    "name": "invalid_requested_fallback_telemetry",
    "snapshot": {
      "session": null,
      "entitlements": [],
      "offlineCache": {
        "lastValidatedAt": "2026-02-13T00:00:00.000Z",
        "maxOfflineDays": 21,
        "offlineDaysRemaining": 21,
        "cacheState": "valid"
      },
      "transactions": []
    },
    "requestedEngineId": "unknown.engine.v1",
    "expected": {
      "schemaVersion": "1.0.0",
      "engine": {
        "id": "stub-music-intelligence-v1",
        "name": "Stub Music Intelligence",
        "version": "1.0.0",
        "source": "default",
        "reason": "Requested engine id 'unknown.engine.v1' not found; applying deterministic default policy."
      },
      "decision": {
        "status": "ready",
        "lane": "authenticate",
        "confidencePct": 92
      },
      "context": {
        "hasSession": false,
        "ownedCount": 0,
        "installedCount": 0,
        "offlineDaysRemaining": 21
      }
    }
  }
]
